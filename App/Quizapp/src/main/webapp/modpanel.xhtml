<?xml version='1.0' encoding='UTF-8'?>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets">
<h:head>
  <title>Modpanel</title>
  <h:outputText value="#{loginController.checkLogin()}"/>
  <h:outputText value="#{loginController.checkPermission()}"/>
</h:head>
<h:body>
  <h2>Modpanel</h2>
  <p><h:outputText value="#{currentUser.user.getUserName()}"/></p>
  <h:form>
    <p><h:commandButton action="#{loginController.logout}" value="Ausloggen"/></p>
  </h:form>
  <a href="#{request.contextPath}/app.xhtml">Zur App</a>
  <h2>Neue Kategorie erstellen</h2>
  <h:form>
    <!-- Input fields for User details -->
    <p><h:outputLabel for="category" value="Kategorie:" /></p>
    <p><h:inputText id="category" value="#{categoryBean.category}" required="true" /></p>
    
    <!-- Command button to trigger the save action -->
    <p><h:commandButton value="Kategorie erstellen" action="#{categoryBean.saveToDatabase}" /></p>
  </h:form>
  <h:form>
    <h:messages globalOnly="true" style="color:red;" />
    <h:panelGrid columns="2">
        <h:outputLabel for="question" value="Frage:" />
        <h:inputText id="question" value="#{questionBean.question}" required="true"/>

        <h:outputLabel for="category" value="Kategorie:" />
        <h:selectOneMenu id="category" value="#{questionBean.category}" converter="#{categoryConverter}">
          <f:selectItems value="#{questionBean.allCategories}" var="cat" itemLabel="#{cat.category}" itemValue="#{cat}" />
        </h:selectOneMenu>

        <h:outputLabel for="correctAnswer" value="Richtige Antwort:" />
        <h:inputText id="correctAnswer" value="#{questionBean.correctAnswer}" required="true"/>

        <h:outputLabel value="Andere Antwortmöglichkeiten:" />
        <ui:repeat value="#{questionBean.answers}" var="answer" varStatus="status">
            <h:inputText value="#{questionBean.answers[status.index]}" required="true"/><br />
        </ui:repeat>

        <h:commandButton value="Frage einreichen" action="#{questionBean.createQuestion}" />
    </h:panelGrid>
  </h:form>
  <h2>Ausstehende Vorschläge</h2>
  
  <h:form>
    <!-- Display the current suggestion's question -->
    <h:outputText value="#{suggestionController.getSuggestion().question.question}" />

    <!-- Buttons to accept or decline the suggestion -->
    <h:commandButton value="Akzeptieren" action="#{suggestionController.acceptSuggestion}"></h:commandButton>
    <h:commandButton value="Ablehnen" action="#{suggestionController.declineSuggestion}"></h:commandButton>

    <!-- Navigation buttons -->
    <h:commandButton value="Zurück" action="#{suggestionController.previousSuggestion}" disabled="#{suggestionController.index == 0}" />
    <h:commandButton value="Vor" action="#{suggestionController.nextSuggestion}" disabled="#{suggestionController.index == suggestionController.maxIndex}" />

    <!-- Display current index out of total -->
    <h:outputText value="#{suggestionController.getIndex() + 1} / #{suggestionController.getMaxIndex() + 1}" />
</h:form>

</h:body>
</html>